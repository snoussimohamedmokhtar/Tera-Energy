<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tera Energy - Trusted Retailers</title>

  <!-- Fonts + Icons (same as index) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700;800&family=Orbitron:wght@400;700&family=Alumni+Sans:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">

  <!-- Leaflet (FREE map) -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
  />

  <!-- Embedded CSS Styles matching index.html -->
  <style>
    /* Reset & Base Styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    /* ========== COLOR CHANGES ========== */
    /* Blue (#2563eb) and Beige (#f5f5dc) color scheme */
    :root {
      --primary: #2563eb;      /* Royal Blue */
      --secondary: #f5f5dc;    /* Beige/Cream */
      --accent: #3b82f6;       /* Lighter Blue */
      --dark: #0f172a;         /* Dark Blue Background */
      --darker: #020617;       /* Darker Blue */
      --light: #f8fafc;        /* Light Text */
      --gray: #334155;         /* Medium Gray */
      --gold: #fbbf24;         /* Gold for accents */
      --neon-glow: 0 0 10px rgba(37, 99, 235, 0.5), 0 0 20px rgba(37, 99, 235, 0.3);
      --section-bg: rgba(245, 245, 220, 0.03); /* Beige tint for sections */
    }

    body {
      font-family: 'Montserrat', sans-serif;
      background-color: var(--dark);
      color: var(--light);
      overflow-x: hidden;
      line-height: 1.6;
    }

    h1, h2, h3, h4 {
      font-family: 'Orbitron', sans-serif;
      font-weight: 700;
    }

    .container {
      width: 90%;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }

    section {
      padding: 100px 0;
    }

    .section-title {
      text-align: center;
      margin-bottom: 60px;
      position: relative;
    }

    .section-title h2 {
      font-size: 3rem;
      display: inline-block;
      text-transform: uppercase;
      letter-spacing: 3px;
      background: linear-gradient(90deg, var(--primary), var(--gold));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 0 15px rgba(37, 99, 235, 0.3);
    }

    .section-title::after {
      content: '';
      position: absolute;
      width: 100px;
      height: 4px;
      background: linear-gradient(90deg, var(--primary), var(--gold));
      bottom: -15px;
      left: 50%;
      transform: translateX(-50%);
      border-radius: 2px;
    }

    .btn {
      display: inline-block;
      padding: 15px 35px;
      background: linear-gradient(90deg, var(--primary), var(--accent));
      color: var(--secondary);
      text-decoration: none;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1px;
      border-radius: 50px;
      border: none;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 5px 15px rgba(37, 99, 235, 0.3);
    }

    .btn:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(37, 99, 235, 0.5);
      background: linear-gradient(90deg, var(--accent), var(--primary));
    }

    /* ========== ANIMATIONS ========== */
    @keyframes float {
      0%, 100% {
        transform: translateY(0) rotate(0deg);
      }
      50% {
        transform: translateY(-20px) rotate(5deg);
      }
    }

    @keyframes glow {
      0%, 100% {
        box-shadow: 0 0 20px rgba(37, 99, 235, 0.3);
      }
      50% {
        box-shadow: 0 0 40px rgba(37, 99, 235, 0.6);
      }
    }

    @keyframes pulse {
      0%, 100% {
        opacity: 1;
      }
      50% {
        opacity: 0.7;
      }
    }

    /* Header & Navigation */
    header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 2000;
      padding: 8px 0;
      background-color: rgba(15, 23, 42, 0.95);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(37, 99, 235, 0.1);
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      transform: translateY(0);
      opacity: 1;
      visibility: visible;
    }

    .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 100%;
      min-height: 60px;
    }

    /* Logo (same as index.html) */
    .logo {
      display: flex;
      align-items: center;
      text-decoration: none;
      transition: all 0.3s ease;
      z-index: 10;
      flex-shrink: 0;
      gap: 15px;
    }

    .logo:hover {
      transform: scale(1.05);
    }

    .logo-image-container {
      display: inline-block;
      position: relative;
      max-width: 70px;
      height: 70px;
      filter: drop-shadow(0 0 10px rgba(37, 99, 235, 0.3));
      transition: all 0.3s ease;
    }

    .logo-image-container:hover {
      filter: drop-shadow(0 0 20px rgba(37, 99, 235, 0.6));
    }

    .logo-image {
      height: 100%;
      width: auto;
      max-width: 70px;
      max-height: 70px;
      display: block;
      object-fit: contain;
      transition: all 0.3s ease;
    }

    .logo-text-container {
      display: flex;
      align-items: center;
    }

    .logo-text {
      font-family: 'Alumni Sans', sans-serif;
      font-weight: 900;
      font-style: italic;
      font-size: 2.4rem;
      color: #ec1c22;
      text-transform: uppercase;
      letter-spacing: 2px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5),
                  0 0 10px rgba(236, 28, 34, 0.3);
      margin: 0;
      padding: 0;
      line-height: 1;
      transition: all 0.3s ease;
    }

    .logo:hover .logo-text {
      transform: scale(1.05);
      text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.7),
                  0 0 15px rgba(236, 28, 34, 0.5);
    }

    /* Navigation links */
    .nav-links {
      display: flex;
      list-style: none;
      margin: 0;
      padding: 0;
      align-items: center;
      justify-content: flex-end;
      gap: 40px;
    }

    .nav-links a {
      color: var(--light);
      text-decoration: none;
      font-weight: 600;
      text-transform: uppercase;
      font-size: 0.9rem;
      letter-spacing: 1px;
      transition: all 0.3s ease;
      position: relative;
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
    }

    .nav-links a:hover {
      color: var(--primary);
    }

    .nav-links a::after {
      content: '';
      position: absolute;
      width: 0;
      height: 2px;
      background: var(--primary);
      left: 0;
      bottom: -5px;
      transition: width 0.3s ease;
    }

    .nav-links a:hover::after {
      width: 100%;
    }

    .nav-links a.active {
      color: var(--gold);
    }

    .nav-links a.active::after {
      width: 100%;
      background: linear-gradient(90deg, var(--gold), var(--primary));
    }

    /* DROPDOWN MENU */
    .dropdown {
      position: relative;
      display: inline-block;
    }

    .dropbtn {
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .dropdown-content {
      display: none;
      position: absolute;
      background-color: rgba(15, 23, 42, 0.98);
      backdrop-filter: blur(20px);
      min-width: 180px;
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
      z-index: 1000;
      border-radius: 8px;
      border: 1px solid rgba(37, 99, 235, 0.2);
      overflow: hidden;
      margin-top: 5px;
      opacity: 0;
      transform: translateY(-10px);
      transition: all 0.3s ease;
    }

    .dropdown-content a {
      color: var(--light);
      padding: 12px 20px;
      text-decoration: none;
      display: block;
      text-align: left;
      font-size: 0.9rem;
      font-weight: 500;
      transition: all 0.3s ease;
      border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    }

    .dropdown-content a:last-child {
      border-bottom: none;
    }

    .dropdown-content a:hover {
      background-color: rgba(37, 99, 235, 0.2);
      color: var(--primary);
      padding-left: 25px;
    }

    .dropdown:hover .dropdown-content {
      display: block;
      opacity: 1;
      transform: translateY(0);
    }

    .dropbtn i {
      font-size: 0.8rem;
      transition: transform 0.3s ease;
    }

    .dropdown:hover .dropbtn i {
      transform: rotate(180deg);
    }

    /* LANGUAGE SWITCHER */
    .language-switcher {
      position: relative;
      margin-left: 20px;
    }

    .language-btn {
      background: none;
      border: 2px solid rgba(37, 99, 235, 0.3);
      border-radius: 8px;
      padding: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 50px;
      height: 40px;
      background: rgba(37, 99, 235, 0.05);
    }

    .language-btn:hover {
      border-color: var(--primary);
      background: rgba(37, 99, 235, 0.1);
      transform: translateY(-2px);
    }

    .flag-img {
      width: 32px;
      height: 24px;
      object-fit: cover;
      border-radius: 3px;
      transition: transform 0.3s ease;
    }

    .language-btn:hover .flag-img {
      transform: scale(1.1);
    }

    .language-tooltip {
      position: absolute;
      bottom: -30px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(15, 23, 42, 0.95);
      color: var(--light);
      padding: 5px 10px;
      border-radius: 4px;
      font-size: 0.8rem;
      white-space: nowrap;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
      border: 1px solid rgba(37, 99, 235, 0.2);
      backdrop-filter: blur(10px);
      z-index: 1000;
    }

    .language-btn:hover + .language-tooltip {
      opacity: 1;
      visibility: visible;
      bottom: -35px;
    }

    /* Mobile menu button */
    .mobile-menu-btn {
      display: none;
      font-size: 1.5rem;
      background: none;
      border: none;
      color: var(--light);
      cursor: pointer;
      z-index: 10;
    }

    /* HERO SECTION (Retailers specific) - FIXED PADDING */
    .retailers-hero {
      height: auto;
      min-height: 100vh;
      display: flex;
      align-items: center;
      position: relative;
      overflow: hidden;
      background: radial-gradient(circle at 20% 50%, rgba(37, 99, 235, 0.1) 0%, transparent 50%),
                  radial-gradient(circle at 80% 20%, rgba(245, 245, 220, 0.05) 0%, transparent 50%);
      padding: 180px 0 80px; /* Increased top padding to 180px */
    }

    .hero-inner {
      display: grid;
      grid-template-columns: 1.2fr 0.8fr;
      gap: 60px;
      align-items: start;
      z-index: 2;
    }

    .hero-copy {
      max-width: 700px;
    }

    .hero-title {
      font-size: 4rem;
      line-height: 1.1;
      margin-bottom: 20px;
      text-transform: uppercase;
      background: linear-gradient(90deg, var(--primary), var(--gold));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 0 30px rgba(37, 99, 235, 0.5);
    }

    .hero-subtitle {
      font-size: 1.2rem;
      margin-bottom: 30px;
      color: var(--secondary);
      max-width: 600px;
    }

    .hero-actions {
      display: flex;
      gap: 20px;
      margin-bottom: 30px;
    }

    .hero-note {
      display: inline-flex;
      gap: 10px;
      align-items: center;
      padding: 12px 20px;
      border-radius: 12px;
      background: rgba(37, 99, 235, 0.1);
      border: 1px solid rgba(37, 99, 235, 0.2);
      color: var(--secondary);
    }

    /* Hero card (simplified - only stats) */
    .hero-card {
      background: linear-gradient(145deg, rgba(30, 41, 59, 0.9), rgba(15, 23, 42, 0.9));
      border-radius: 20px;
      overflow: hidden;
      border: 1px solid rgba(37, 99, 235, 0.15);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
      position: relative;
      padding: 40px 30px;
    }

    .hero-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, var(--primary), var(--gold), var(--primary));
      animation: pulse 2s infinite;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 12px 20px;
      border-radius: 50px;
      background: rgba(37, 99, 235, 0.15);
      border: 1px solid rgba(37, 99, 235, 0.25);
      color: var(--light);
      font-weight: 700;
      margin-bottom: 40px;
      font-size: 1.1rem;
    }

    .badge i {
      color: var(--gold);
      font-size: 1.2rem;
    }

    .mini-stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 25px;
    }

    .mini-stat {
      text-align: center;
      padding: 25px 15px;
      background: rgba(15, 23, 42, 0.6);
      border-radius: 15px;
      border: 1px solid rgba(37, 99, 235, 0.1);
      transition: all 0.3s ease;
    }

    .mini-stat:hover {
      transform: translateY(-5px);
      border-color: var(--primary);
      box-shadow: 0 10px 25px rgba(37, 99, 235, 0.2);
    }

    .mini-stat-number {
      font-family: 'Orbitron', sans-serif;
      font-size: 3rem;
      color: var(--gold);
      margin-bottom: 10px;
      text-shadow: 0 0 15px rgba(251, 191, 36, 0.3);
    }

    .mini-stat-label {
      color: var(--secondary);
      font-size: 1rem;
      opacity: 0.9;
      font-weight: 600;
    }

    /* MAIN SECTION */
    .retailers-section {
      background-color: var(--section-bg);
      position: relative;
      padding: 100px 0;
    }

    /* Controls (search and filters) */
    .controls {
      display: grid;
      grid-template-columns: 2fr 1fr 1fr auto;
      gap: 20px;
      margin-bottom: 40px;
      background: rgba(15, 23, 42, 0.6);
      padding: 25px;
      border-radius: 15px;
      border: 1px solid rgba(37, 99, 235, 0.1);
    }

    .control {
      position: relative;
    }

    .control.search {
      display: flex;
      align-items: center;
    }

    .control.search i {
      position: absolute;
      left: 20px;
      color: var(--primary);
    }

    .control input,
    .control select {
      width: 100%;
      padding: 15px 20px 15px 50px;
      background: rgba(245, 245, 220, 0.05);
      border: 1px solid rgba(37, 99, 235, 0.2);
      border-radius: 12px;
      color: var(--light);
      font-size: 1rem;
      transition: all 0.3s ease;
    }

    .control input:focus,
    .control select:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 15px rgba(37, 99, 235, 0.3);
    }

    .control select {
      padding-left: 20px;
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%232563eb' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 15px center;
      background-size: 16px;
    }

    .btn-ghost {
      background: rgba(37, 99, 235, 0.1);
      color: var(--light);
      border: 1px solid rgba(37, 99, 235, 0.25);
    }

    .btn-ghost:hover {
      background: rgba(37, 99, 235, 0.2);
      box-shadow: 0 10px 25px rgba(37, 99, 235, 0.35);
    }

    /* Retailers Layout */
    .retailers-layout {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
      margin-bottom: 60px;
    }

    /* Retailers List */
    .retailers-list {
      background: rgba(15, 23, 42, 0.6);
      border-radius: 20px;
      border: 1px solid rgba(37, 99, 235, 0.1);
      overflow: hidden;
    }

    .list-header {
      padding: 25px;
      border-bottom: 1px solid rgba(37, 99, 235, 0.1);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .list-header h3 {
      color: var(--primary);
      font-size: 1.5rem;
    }

    .list-count {
      background: rgba(37, 99, 235, 0.1);
      padding: 8px 16px;
      border-radius: 50px;
      font-weight: 700;
      color: var(--light);
    }

    .cards-wrap {
      padding: 20px;
      max-height: 600px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    /* Retailer Card (similar to product cards in index) */
    .retailer-card {
      background: linear-gradient(145deg, rgba(30, 41, 59, 0.9), rgba(15, 23, 42, 0.9));
      border-radius: 15px;
      padding: 25px;
      border: 1px solid rgba(37, 99, 235, 0.15);
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer;
    }

    .retailer-card:hover {
      transform: translateY(-10px);
      border-color: var(--primary);
      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.4), 0 0 40px rgba(37, 99, 235, 0.2);
    }

    .retailer-title {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 15px;
    }

    .retailer-title h4 {
      font-size: 1.2rem;
      color: var(--light);
      flex: 1;
    }

    .card-badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 6px 12px;
      border-radius: 20px;
      background: rgba(251, 191, 36, 0.15);
      border: 1px solid rgba(251, 191, 36, 0.25);
      color: var(--gold);
      font-size: 0.8rem;
      font-weight: 700;
      margin-left: 15px;
    }

    .retailer-meta {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .pill {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 6px 12px;
      border-radius: 20px;
      background: rgba(37, 99, 235, 0.1);
      border: 1px solid rgba(37, 99, 235, 0.2);
      color: var(--light);
      font-size: 0.85rem;
    }

    .pill i {
      color: var(--primary);
    }

    .retailer-lines {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-bottom: 20px;
    }

    .line {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      color: var(--secondary);
    }

    .line i {
      color: var(--primary);
      margin-top: 2px;
    }

    .retailer-actions {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .btn-small {
      padding: 10px 20px;
      font-size: 0.9rem;
      font-weight: 600;
    }

    /* Empty State */
    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: var(--secondary);
    }

    .empty-state i {
      font-size: 3rem;
      color: var(--primary);
      margin-bottom: 20px;
      opacity: 0.5;
    }

    /* Retailers Map */
    .retailers-map {
      background: rgba(15, 23, 42, 0.6);
      border-radius: 20px;
      border: 1px solid rgba(37, 99, 235, 0.1);
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    .map-header {
      padding: 25px;
      border-bottom: 1px solid rgba(37, 99, 235, 0.1);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .map-header h3 {
      color: var(--primary);
      font-size: 1.5rem;
    }

    .map-hint {
      display: flex;
      align-items: center;
      gap: 10px;
      color: var(--secondary);
      font-size: 0.9rem;
    }

    #map {
      flex: 1;
      min-height: 500px;
      background: rgba(15, 23, 42, 0.8);
    }

    .map-footer {
      padding: 20px 25px;
      border-top: 1px solid rgba(37, 99, 235, 0.1);
      display: flex;
      align-items: center;
      gap: 10px;
      color: var(--secondary);
      font-size: 0.9rem;
    }

    /* CTA Section */
    .retailers-cta {
      background: linear-gradient(145deg, rgba(51, 65, 85, 0.8), rgba(30, 41, 59, 0.8));
      border-radius: 20px;
      padding: 50px;
      border: 1px solid rgba(37, 99, 235, 0.1);
      text-align: center;
      margin-top: 60px;
    }

    .retailers-cta h3 {
      color: var(--primary);
      font-size: 2rem;
      margin-bottom: 20px;
    }

    .retailers-cta p {
      color: var(--secondary);
      margin-bottom: 30px;
      font-size: 1.1rem;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }

    /* Footer (same as index.html) */
    footer {
      background-color: var(--darker);
      padding: 60px 0 30px;
      border-top: 1px solid rgba(37, 99, 235, 0.1);
      position: relative;
      overflow: hidden;
    }

    footer::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, var(--primary), var(--gold), var(--primary));
      animation: pulse 3s infinite;
    }

    .footer-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      margin-bottom: 40px;
    }

    .footer-logo {
      display: flex;
      align-items: center;
    }

    .footer-logo-container {
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .footer-logo-image {
      height: 80px;
      width: auto;
      max-width: 80px;
      filter: drop-shadow(0 0 10px rgba(37, 99, 235, 0.3));
      transition: all 0.3s ease;
    }

    .footer-logo-image:hover {
      filter: drop-shadow(0 0 20px rgba(37, 99, 235, 0.6));
      transform: scale(1.1);
    }

    .footer-logo-text-container {
      display: flex;
      align-items: center;
    }

    .footer-logo-text {
      font-family: 'Alumni Sans', sans-serif;
      font-weight: 900;
      font-style: italic;
      font-size: 3rem;
      color: #ec1c22;
      text-transform: uppercase;
      letter-spacing: 3px;
      text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.6),
                  0 0 15px rgba(236, 28, 34, 0.4);
      margin: 0;
      padding: 0;
      line-height: 1;
      transition: all 0.3s ease;
    }

    .social-links {
      display: flex;
    }

    .social-links a {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 45px;
      height: 45px;
      background-color: rgba(37, 99, 235, 0.1);
      border-radius: 50%;
      margin-left: 15px;
      color: var(--light);
      font-size: 1.2rem;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .social-links a::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      background: var(--primary);
      border-radius: 50%;
      transform: translate(-50%, -50%);
      transition: width 0.6s, height 0.6s;
    }

    .social-links a:hover::before {
      width: 100%;
      height: 100%;
    }

    .social-links a:hover {
      color: var(--secondary);
      transform: translateY(-5px) rotate(360deg);
    }

    .social-links a i {
      position: relative;
      z-index: 1;
    }

    .copyright {
      text-align: center;
      padding-top: 30px;
      border-top: 1px solid rgba(255, 255, 255, 0.05);
      color: #94a3b8;
      font-size: 0.9rem;
    }

    /* Leaflet popup styling */
    .leaflet-popup-content-wrapper {
      background: rgba(15, 23, 42, 0.95);
      color: var(--light);
      border: 1px solid rgba(37, 99, 235, 0.25);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.45);
      border-radius: 12px;
      backdrop-filter: blur(10px);
    }

    .leaflet-popup-tip {
      background: rgba(15, 23, 42, 0.95);
    }

    .popup-title {
      font-family: 'Orbitron', sans-serif;
      font-weight: 800;
      color: var(--gold);
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .popup-badge {
      font-size: 0.75rem;
      padding: 3px 8px;
      border-radius: 999px;
      background: rgba(251, 191, 36, 0.12);
      border: 1px solid rgba(251, 191, 36, 0.25);
      color: var(--gold);
    }

    .popup-line {
      display: flex;
      align-items: flex-start;
      gap: 10px;
      margin: 8px 0;
      color: rgba(245, 245, 220, 0.92);
      font-size: 0.95rem;
    }

    .popup-line i {
      color: var(--primary);
      margin-top: 2px;
    }

    .popup-actions {
      margin-top: 15px;
      display: flex;
      gap: 10px;
    }

    .popup-btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 16px;
      border-radius: 12px;
      text-decoration: none;
      font-weight: 700;
      color: var(--secondary);
      background: linear-gradient(90deg, var(--primary), var(--accent));
      border: 1px solid rgba(37, 99, 235, 0.2);
      font-size: 0.9rem;
    }

    .popup-btn.ghost {
      background: rgba(37, 99, 235, 0.12);
      color: var(--light);
    }

    /* Responsive Design */
    @media (max-width: 1200px) {
      .hero-inner {
        grid-template-columns: 1fr;
        gap: 40px;
      }
      
      .hero-title {
        font-size: 3.5rem;
      }
      
      .retailers-layout {
        grid-template-columns: 1fr;
        gap: 40px;
      }
      
      #map {
        min-height: 400px;
      }
    }

    @media (max-width: 992px) {
      .controls {
        grid-template-columns: 1fr;
        gap: 15px;
      }
      
      .section-title h2 {
        font-size: 2.5rem;
      }
      
      .hero-title {
        font-size: 3rem;
      }
      
      .hero-actions {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .hero-actions .btn {
        width: 100%;
        text-align: center;
        justify-content: center;
      }
    }

    @media (max-width: 768px) {
      .mobile-menu-btn {
        display: block;
      }
      
      .nav-links {
        position: fixed;
        top: 80px;
        left: 0;
        width: 100%;
        background-color: rgba(15, 23, 42, 0.98);
        backdrop-filter: blur(20px);
        flex-direction: column;
        align-items: center;
        padding: 30px 0;
        transform: translateY(-100%);
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
        gap: 20px;
        z-index: 9;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
      }
      
      .nav-links.active {
        transform: translateY(0);
        opacity: 1;
        visibility: visible;
      }
      
      .nav-links li {
        width: 100%;
        text-align: center;
      }
      
      .nav-links a {
        display: block;
        padding: 15px 20px;
        font-size: 1.1rem;
      }
      
      .dropdown-content {
        position: static;
        display: none;
        background-color: rgba(15, 23, 42, 0.7);
        box-shadow: none;
        border: none;
        margin-top: 0;
        opacity: 1;
        transform: none;
        width: 100%;
      }
      
      .dropdown.active .dropdown-content {
        display: block;
      }
      
      .dropdown-content a {
        padding: 12px 40px;
        text-align: center;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      }
      
      .dropdown.active .dropbtn i {
        transform: rotate(180deg);
      }
      
      .language-switcher {
        margin-left: 0;
        margin-top: 20px;
        order: 3;
        width: 100%;
        display: flex;
        justify-content: center;
      }
      
      .nav-links.active .language-switcher {
        display: flex;
      }
      
      .retailers-hero {
        height: auto;
        padding: 150px 0 60px;
      }
      
      .hero-title {
        font-size: 2.5rem;
      }
      
      .hero-subtitle {
        font-size: 1.1rem;
      }
      
      .mini-stats {
        grid-template-columns: repeat(3, 1fr);
        gap: 15px;
      }
      
      .hero-card {
        padding: 30px 20px;
      }
      
      .mini-stat-number {
        font-size: 2.5rem;
      }
      
      .retailers-cta {
        padding: 30px;
      }
      
      .retailers-cta h3 {
        font-size: 1.5rem;
      }
      
      .footer-content {
        flex-direction: column;
        text-align: center;
        gap: 30px;
      }
      
      .social-links {
        margin-top: 30px;
        justify-content: center;
      }
      
      .social-links a {
        margin: 0 10px;
      }
    }

    @media (max-width: 576px) {
      .hero-title {
        font-size: 2.2rem;
      }
      
      section {
        padding: 70px 0;
      }
      
      .section-title h2 {
        font-size: 2rem;
      }
      
      .mini-stats {
        grid-template-columns: 1fr;
        gap: 15px;
      }
      
      .hero-card {
        padding: 25px 20px;
      }
      
      .badge {
        margin-bottom: 30px;
      }
      
      .retailers-cta {
        padding: 25px 20px;
      }
      
      .footer-logo-text {
        font-size: 2.4rem;
      }
      
      .footer-logo-image {
        height: 60px;
      }
    }

    /* Hide scrollbar for cards-wrap but keep functionality */
    .cards-wrap::-webkit-scrollbar {
      width: 8px;
    }
    
    .cards-wrap::-webkit-scrollbar-track {
      background: rgba(37, 99, 235, 0.1);
      border-radius: 4px;
    }
    
    .cards-wrap::-webkit-scrollbar-thumb {
      background: var(--primary);
      border-radius: 4px;
    }

    /* Fix for German long words */
    html[lang="de"] .hero-title {
      font-size: 3.2rem;
      line-height: 1.2;
    }

    html[lang="de"] .badge {
      font-size: 0.95rem;
      padding: 10px 18px;
      white-space: nowrap;
    }

    html[lang="de"] .mini-stat-label {
      font-size: 0.8rem;
    }

    html[lang="de"] .hero-subtitle {
      font-size: 1.1rem;
    }

    html[lang="de"] .retailers-cta h3 {
      font-size: 1.8rem;
    }

    @media (max-width: 768px) {
      html[lang="de"] .hero-title {
        font-size: 2.2rem;
      }
      
      html[lang="de"] .hero-subtitle {
        font-size: 1rem;
      }
    }

    /* Style for select dropdown options */
    select option {
    color: #000000 !important; /* Black text */
    background-color: #ffffff !important; /* White background */
    }

    select.form-control option {
    color: #000000 !important;
    background-color: #ffffff !important;
    }

    #location option {
    color: #000000 !important;
    background-color: #ffffff !important;
    }

    /* Make sure the dropdown itself looks good on the dark theme */
    select {
    color: var(--light) !important; /* Light text for the selected value */
    background-color: rgba(245, 245, 220, 0.05) !important;
    }

    select option:hover,
    select option:focus,
    select option:active {
    background-color: var(--primary) !important;
    color: var(--secondary) !important;
    }

  </style>
</head>

<body>
  <!-- Header -->
  <header>
    <div class="container">
      <nav class="navbar">
        <!-- Logo -->
        <a href="index.html#home" class="logo">
          <div class="logo-image-container">
            <img src="logo.WebP" alt="Tera Energy Logo" class="logo-image">
          </div>
          <div class="logo-text-container">
            <h1 class="logo-text">TERA ENERGY</h1>
          </div>
        </a>

        <!-- Links -->
        <ul class="nav-links" id="navLinks">
          <li><a href="index.html#home" data-translate="home">Home</a></li>

          <li class="dropdown">
            <a href="#" class="dropbtn" data-translate="products">Products <i class="fas fa-chevron-down"></i></a>
            <div class="dropdown-content">
              <a href="drinks.html" data-translate="drinks">Drinks</a>
              <a href="biscuits.html" data-translate="snacks">Snacks</a>
            </div>
          </li>

          <li><a class="active" href="retailers.html" data-translate="retailers">Retailers</a></li>
          <li><a href="index.html#logo-display" data-translate="about-us">About Us</a></li>
          <li><a href="index.html#contact" data-translate="contact">Contact</a></li>
        </ul>

        <!-- Language Switcher (kept, simple) -->
        <div id="language-switcher" class="language-switcher">
          <button id="language-btn" class="language-btn" aria-label="Change language">
            <img id="flag-img" src="./assets/flags/uk.svg" alt="English" class="flag-img">
          </button>
          <div class="language-tooltip" id="language-tooltip">
            <span id="current-language">English</span>
          </div>
        </div>

        <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Menu">
          <i class="fas fa-bars"></i>
        </button>
      </nav>
    </div>
  </header>

  <!-- Hero -->
  <section class="retailers-hero">
    <div class="container">
      <div class="hero-inner">
        <div class="hero-copy">
          <h2 class="hero-title" data-translate="retailers-title">Trusted Retailers</h2>
          <p class="hero-subtitle" data-translate="retailers-subtitle">
            Find official Tera Energy retailers near you. Only verified partners are listed here.
          </p>

          <div class="hero-actions">
            <a href="#retailers" class="btn">
              <i class="fas fa-store"></i>
              <span data-translate="browse-retailers">Browse Retailers</span>
            </a>
            <a href="index.html#contact" class="btn btn-ghost">
              <i class="fas fa-handshake"></i>
              <span data-translate="become-retailer">Become a Retailer</span>
            </a>
          </div>
        </div>

        <!-- Simplified hero card with only stats -->
        <div class="hero-card">
          <div class="badge">
            <i class="fas fa-crown"></i>
            <span data-translate="verified-partners">Verified Partners</span>
          </div>
          <div class="mini-stats">
            <div class="mini-stat">
              <div class="mini-stat-number" id="statTotal">0</div>
              <div class="mini-stat-label" data-translate="total-retailers">Total Retailers</div>
            </div>
            <div class="mini-stat">
              <div class="mini-stat-number" id="statCities">0</div>
              <div class="mini-stat-label" data-translate="cities">Cities</div>
            </div>
            <div class="mini-stat">
              <div class="mini-stat-number" id="statFeatured">0</div>
              <div class="mini-stat-label" data-translate="featured">Featured</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Main -->
  <section id="retailers" class="retailers-section">
    <div class="container">
      <div class="section-title">
        <h2 data-translate="find-retailers">Find Retailers</h2>
      </div>

      <!-- Controls -->
      <div class="controls">
        <div class="control search">
          <i class="fas fa-magnifying-glass"></i>
          <input id="searchInput" type="text" placeholder="Search by name, city, address..." />
        </div>

        <div class="control">
          <select id="cityFilter" aria-label="City filter">
            <option value="">All Cities</option>
          </select>
        </div>

        <div class="control">
          <select id="typeFilter" aria-label="Type filter">
            <option value="">All Types</option>
          </select>
        </div>

        <button class="btn btn-ghost" id="resetBtn" type="button">
          <i class="fas fa-rotate-left"></i>
          <span data-translate="reset">Reset</span>
        </button>
      </div>

      <!-- Layout -->
      <div class="retailers-layout">
        <!-- List -->
        <aside class="retailers-list">
          <div class="list-header">
            <h3 data-translate="trusted-list">Trusted List</h3>
            <div class="list-count">
              <span id="resultCount">0</span>
              <span data-translate="results">results</span>
            </div>
          </div>

          <div id="cardsWrap" class="cards-wrap">
            <!-- Cards injected by JS -->
          </div>

          <div id="emptyState" class="empty-state" hidden>
            <i class="fas fa-circle-info"></i>
            <p data-translate="no-results">No retailers match your search.</p>
          </div>
        </aside>

        <!-- Map -->
        <div class="retailers-map">
          <div class="map-header">
            <h3 data-translate="map-title">Map</h3>
            <div class="map-hint">
              <i class="fas fa-location-dot"></i>
              <span data-translate="map-hint">Click pins for details</span>
            </div>
          </div>
          <div id="map"></div>

          <div class="map-footer">
            <i class="fas fa-globe"></i>
            <span data-translate="map-footer">
              Map data: OpenStreetMap. Works without a key.
            </span>
          </div>
        </div>
      </div>

      <!-- Footer CTA -->
      <div class="retailers-cta">
        <div class="cta-text">
          <h3 data-translate="cta-title">Want to be an official retailer?</h3>
          <p data-translate="cta-desc">
            Contact us and we'll verify your shop and add it here.
          </p>
        </div>
        <a class="btn" href="index.html#contact">
          <i class="fas fa-paper-plane"></i>
          <span data-translate="contact-us">Contact Us</span>
        </a>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-logo">
          <div class="footer-logo-container">
            <img src="logo.WebP" alt="Tera Energy Logo" class="footer-logo-image">
            <div class="footer-logo-text-container">
              <h2 class="footer-logo-text">TERA ENERGY</h2>
            </div>
          </div>
        </div>

        <div class="social-links">
          <a href="#"><i class="fab fa-instagram"></i></a>
          <a href="#"><i class="fab fa-facebook-f"></i></a>
          <a href="#"><i class="fab fa-twitter"></i></a>
          <a href="#"><i class="fab fa-linkedin-in"></i></a>
        </div>
      </div>

      <div class="copyright">
        <p data-translate="copyright">&copy; 2013 Tera Energy. All rights reserved. | Tunis & Vienna | Strength of the Lion, Power of Royalty</p>
      </div>
    </div>
  </footer>

  <!-- Leaflet JS -->
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""
  ></script>

  <script>
    /**********************************************************************
     * ✅ HOW TO ADD RETAILERS (THIS IS THE ONLY PART YOU EDIT)
     *
     * 1) Copy one object
     * 2) Paste it inside the RETAILERS array
     * 3) Change name/address/city/phone + lat/lng
     *
     * ✅ How to get lat/lng:
     * - Open Google Maps
     * - Right click on the place
     * - Copy the numbers (example: 36.8065, 10.1815)
     **********************************************************************/
    const RETAILERS = [
      {
        id: "tn-tunis-1",
        name: "Tera Market - Bab Bhar",
        type: "Grocery",
        city: "Tunis",
        address: "09 Rue Ibn Jazzar, Bab Bhar, 1002 Tunis",
        phone: "+216 53 553 239",
        hours: "Mon–Sat: 9:00–19:00",
        lat: 36.8009,
        lng: 10.1756,
        featured: true
      },
      {
        id: "tn-la-marsa-1",
        name: "Royal Corner",
        type: "Mini Market",
        city: "La Marsa",
        address: "Avenue Habib Bourguiba, La Marsa",
        phone: "+216 20 000 000",
        hours: "Daily: 10:00–22:00",
        lat: 36.8785,
        lng: 10.3244,
        featured: false
      },
      {
        id: "at-vienna-1",
        name: "Vienna Premium Store",
        type: "Retail",
        city: "Vienna",
        address: "Rennbahnweg 27, 1220 Wien",
        phone: "+43 676 719 1985",
        hours: "Mon–Fri: 9:00–17:00",
        lat: 48.2419,
        lng: 16.4387,
        featured: true
      }
    ];

    /**********************************************************************
     * UI + MAP
     **********************************************************************/
    const $ = (sel) => document.querySelector(sel);
    const cardsWrap = $("#cardsWrap");
    const emptyState = $("#emptyState");
    const resultCount = $("#resultCount");
    const statTotal = $("#statTotal");
    const statCities = $("#statCities");
    const statFeatured = $("#statFeatured");

    const searchInput = $("#searchInput");
    const cityFilter = $("#cityFilter");
    const typeFilter = $("#typeFilter");
    const resetBtn = $("#resetBtn");

    // Mobile menu
    const mobileMenuBtn = $("#mobileMenuBtn");
    const navLinks = $("#navLinks");
    mobileMenuBtn.addEventListener("click", () => {
      navLinks.classList.toggle("active");
      mobileMenuBtn.innerHTML = navLinks.classList.contains("active")
        ? '<i class="fas fa-times"></i>'
        : '<i class="fas fa-bars"></i>';
    });

    // Dropdown mobile toggle
    document.querySelectorAll(".dropdown .dropbtn").forEach(btn => {
      btn.addEventListener("click", (e) => {
        if (window.innerWidth <= 768) {
          e.preventDefault();
          btn.closest(".dropdown").classList.toggle("active");
        }
      });
    });

    // Build unique lists
    function unique(arr) { return [...new Set(arr)].sort((a,b)=>a.localeCompare(b)); }

    function fillFilters() {
      const cities = unique(RETAILERS.map(r => r.city).filter(Boolean));
      const types = unique(RETAILERS.map(r => r.type).filter(Boolean));

      cityFilter.innerHTML = `<option value="">All Cities</option>` + cities.map(c => `<option value="${c}">${c}</option>`).join("");
      typeFilter.innerHTML = `<option value="">All Types</option>` + types.map(t => `<option value="${t}">${t}</option>`).join("");

      statTotal.textContent = RETAILERS.length.toString();
      statCities.textContent = unique(RETAILERS.map(r=>r.city)).length.toString();
      statFeatured.textContent = RETAILERS.filter(r=>r.featured).length.toString();
    }

    // Map init
    const map = L.map("map", { scrollWheelZoom: true });

    // Nice default center (auto-fit later)
    map.setView([36.8065, 10.1815], 11);

    // OSM tiles
    L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
      maxZoom: 19,
      attribution: "&copy; OpenStreetMap"
    }).addTo(map);

    const markersById = new Map();
    const markerLayer = L.layerGroup().addTo(map);

    function buildPopup(r) {
      const googleLink = `https://www.google.com/maps?q=${encodeURIComponent(r.lat + "," + r.lng)}`;
      const telLink = r.phone ? `tel:${r.phone.replace(/\s+/g,'')}` : "";

      return `
        <div class="popup">
          <div class="popup-title">${escapeHtml(r.name)} ${r.featured ? '<span class="popup-badge">Featured</span>' : ''}</div>
          <div class="popup-line"><i class="fas fa-location-dot"></i> ${escapeHtml(r.address)}</div>
          <div class="popup-line"><i class="fas fa-city"></i> ${escapeHtml(r.city)} • ${escapeHtml(r.type || "Retailer")}</div>
          ${r.hours ? `<div class="popup-line"><i class="fas fa-clock"></i> ${escapeHtml(r.hours)}</div>` : ""}
          ${r.phone ? `<div class="popup-actions">
              <a class="popup-btn" href="${googleLink}" target="_blank" rel="noopener"><i class="fas fa-route"></i> Directions</a>
              <a class="popup-btn ghost" href="${telLink}"><i class="fas fa-phone"></i> Call</a>
          </div>` : `<div class="popup-actions">
              <a class="popup-btn" href="${googleLink}" target="_blank" rel="noopener"><i class="fas fa-route"></i> Directions</a>
          </div>`}
        </div>
      `;
    }

    function escapeHtml(str) {
      return String(str ?? "")
        .replaceAll("&", "&amp;")
        .replaceAll("<", "&lt;")
        .replaceAll(">", "&gt;")
        .replaceAll('"', "&quot;")
        .replaceAll("'", "&#039;");
    }

    function clearMarkers() {
      markerLayer.clearLayers();
      markersById.clear();
    }

    function renderMarkers(list) {
      clearMarkers();

      const bounds = [];
      list.forEach(r => {
        if (typeof r.lat !== "number" || typeof r.lng !== "number") return;

        const marker = L.marker([r.lat, r.lng], { title: r.name });
        marker.bindPopup(buildPopup(r), { maxWidth: 320 });
        marker.addTo(markerLayer);

        markersById.set(r.id, marker);
        bounds.push([r.lat, r.lng]);
      });

      // Fit to visible markers
      if (bounds.length) {
        map.fitBounds(bounds, { padding: [30, 30] });
      }
    }

    function makeCard(r) {
      const featured = r.featured ? `<span class="card-badge"><i class="fas fa-crown"></i> Featured</span>` : "";
      const googleLink = `https://www.google.com/maps?q=${encodeURIComponent(r.lat + "," + r.lng)}`;
      const telLink = r.phone ? `tel:${r.phone.replace(/\s+/g,'')}` : "";

      return `
        <article class="retailer-card" data-id="${escapeHtml(r.id)}">
          <div class="retailer-card-top">
            <div class="retailer-title">
              <h4>${escapeHtml(r.name)}</h4>
              ${featured}
            </div>
            <div class="retailer-meta">
              <span class="pill"><i class="fas fa-city"></i> ${escapeHtml(r.city)}</span>
              <span class="pill"><i class="fas fa-tag"></i> ${escapeHtml(r.type || "Retail")}</span>
            </div>
          </div>

          <div class="retailer-lines">
            <div class="line"><i class="fas fa-location-dot"></i><span>${escapeHtml(r.address)}</span></div>
            ${r.hours ? `<div class="line"><i class="fas fa-clock"></i><span>${escapeHtml(r.hours)}</span></div>` : ""}
            ${r.phone ? `<div class="line"><i class="fas fa-phone"></i><span>${escapeHtml(r.phone)}</span></div>` : ""}
          </div>

          <div class="retailer-actions">
            <button class="btn btn-small btn-ghost zoom-btn" type="button">
              <i class="fas fa-location-crosshairs"></i> Zoom
            </button>
            <a class="btn btn-small" href="${googleLink}" target="_blank" rel="noopener">
              <i class="fas fa-route"></i> Directions
            </a>
            ${r.phone ? `<a class="btn btn-small btn-ghost" href="${telLink}">
              <i class="fas fa-phone"></i> Call
            </a>` : ""}
          </div>
        </article>
      `;
    }

    function applyFilters() {
      const q = searchInput.value.trim().toLowerCase();
      const city = cityFilter.value;
      const type = typeFilter.value;

      const filtered = RETAILERS.filter(r => {
        const hay = `${r.name} ${r.city} ${r.type} ${r.address}`.toLowerCase();
        const matchQ = !q || hay.includes(q);
        const matchCity = !city || r.city === city;
        const matchType = !type || r.type === type;
        return matchQ && matchCity && matchType;
      });

      // Render list
      cardsWrap.innerHTML = filtered.map(makeCard).join("");
      resultCount.textContent = String(filtered.length);
      emptyState.hidden = filtered.length !== 0;

      // Render map markers
      renderMarkers(filtered);

      // Hook card clicks
      cardsWrap.querySelectorAll(".retailer-card").forEach(card => {
        const id = card.getAttribute("data-id");
        const marker = markersById.get(id);

        // Whole card click = zoom (except links)
        card.addEventListener("click", (e) => {
          if (e.target.closest("a")) return;
          if (!marker) return;
          map.setView(marker.getLatLng(), 15, { animate: true });
          marker.openPopup();
        });

        // Zoom button
        const zoomBtn = card.querySelector(".zoom-btn");
        if (zoomBtn) {
          zoomBtn.addEventListener("click", (e) => {
            e.stopPropagation();
            if (!marker) return;
            map.setView(marker.getLatLng(), 15, { animate: true });
            marker.openPopup();
          });
        }
      });

      return filtered;
    }

    // Reset
    resetBtn.addEventListener("click", () => {
      searchInput.value = "";
      cityFilter.value = "";
      typeFilter.value = "";
      applyFilters();
    });

    // Live filtering
    [searchInput, cityFilter, typeFilter].forEach(el => {
      el.addEventListener("input", applyFilters);
      el.addEventListener("change", applyFilters);
    });

    // Init
    fillFilters();
    applyFilters();

    /**********************************************************************
     * Simple Language Switcher (small dictionary, same UI)
     **********************************************************************/
    const languageSwitcher = {
        currentLang: 0,
        languages: [
            { code: 'en', name: 'English', flag: './assets/flags/uk.svg' },
            { code: 'ar', name: 'Arabic',  flag: './assets/flags/tn.svg' },
            { code: 'fr', name: 'French',  flag: './assets/flags/fr.svg' },
            { code: 'de', name: 'German',  flag: './assets/flags/de.svg' }
        ],
        translations: {
            en: {
                home: "Home", products: "Products", retailers: "Retailers", "about-us": "About Us", locations: "Locations", contact: "Contact",
                drinks: "Drinks", snacks: "Snacks",
                "retailers-title": "Trusted Retailers",
                "retailers-subtitle": "Find official Tera Energy retailers near you. Only verified partners are listed here.",
                "browse-retailers": "Browse Retailers",
                "become-retailer": "Become a Retailer",
                "retailers-note": "Tip: Tap a retailer to zoom on the map and get directions.",
                "verified-partners": "Verified Partners",
                "total-retailers": "Total Retailers",
                cities: "Cities",
                featured: "Featured",
                "find-retailers": "Find Retailers",
                reset: "Reset",
                "trusted-list": "Trusted List",
                results: "results",
                "map-title": "Map",
                "map-hint": "Click pins for details",
                "map-footer": "Map data: OpenStreetMap. Works without a key.",
                "no-results": "No retailers match your search.",
                "cta-title": "Want to be an official retailer?",
                "cta-desc": "Contact us and we'll verify your shop and add it here.",
                "contact-us": "Contact Us"
            },
            ar: {
                home: "الرئيسية", products: "المنتجات", retailers: "التجار", "about-us": "من نحن", locations: "المواقع", contact: "اتصل بنا",
                drinks: "المشروبات", snacks: "الوجبات الخفيفة",
                "retailers-title": "التجار المعتمدون",
                "retailers-subtitle": "اعثر على التجار الرسميين لتيرا إنرجي بالقرب منك. فقط الشركاء المعتمدون مدرجون هنا.",
                "browse-retailers": "عرض التجار",
                "become-retailer": "كن تاجرًا",
                "retailers-note": "نصيحة: اضغط على التاجر للتكبير على الخريطة والحصول على الاتجاهات.",
                "verified-partners": "شركاء معتمدون",
                "total-retailers": "عدد التجار",
                cities: "المدن",
                featured: "مميز",
                "find-retailers": "ابحث عن التجار",
                reset: "إعادة ضبط",
                "trusted-list": "قائمة موثوقة",
                results: "نتائج",
                "map-title": "الخريطة",
                "map-hint": "انقر على الدبابيس للحصول على التفاصيل",
                "map-footer": "بيانات الخريطة: OpenStreetMap. تعمل بدون مفتاح.",
                "no-results": "لا يوجد تجار مطابقون لبحثك.",
                "cta-title": "هل تريد أن تكون تاجرًا رسميًا؟",
                "cta-desc": "اتصل بنا وسنقوم بالتحقق من متجرك وإضافته هنا.",
                "contact-us": "اتصل بنا"
            },
            fr: {
                home: "Accueil", products: "Produits", retailers: "Détaillants", "about-us": "À propos", locations: "Emplacements", contact: "Contact",
                drinks: "Boissons", snacks: "Collations",
                "retailers-title": "Détaillants de confiance",
                "retailers-subtitle": "Trouvez des détaillants officiels Tera Energy près de chez vous. Seuls les partenaires vérifiés sont listés ici.",
                "browse-retailers": "Voir les détaillants",
                "become-retailer": "Devenir détaillant",
                "retailers-note": "Astuce : appuyez sur un détaillant pour zoomer sur la carte et obtenir l'itinéraire.",
                "verified-partners": "Partenaires vérifiés",
                "total-retailers": "Total",
                cities: "Villes",
                featured: "En vedette",
                "find-retailers": "Trouver des détaillants",
                reset: "Réinitialiser",
                "trusted-list": "Liste de confiance",
                results: "résultats",
                "map-title": "Carte",
                "map-hint": "Cliquez sur les repères",
                "map-footer": "Données: OpenStreetMap. Fonctionne sans clé.",
                "no-results": "Aucun détaillant ne correspond à votre recherche.",
                "cta-title": "Vous voulez être un détaillant officiel ?",
                "cta-desc": "Contactez-nous, nous vérifierons votre magasin et l'ajouterons ici.",
                "contact-us": "Nous contacter"
            },
            de: {
                home: "Start", products: "Produkte", retailers: "Händler", "about-us": "Über uns", locations: "Standorte", contact: "Kontakt",
                drinks: "Getränke", snacks: "Snacks",
                "retailers-title": "verifizierte Partner",
                "retailers-subtitle": "Finde offizielle Tera Energy Händler in deiner Nähe. Nur verifizierte Partner sind hier gelistet.",
                "browse-retailers": "Händler ansehen",
                "become-retailer": "Händler werden",
                "retailers-note": "Tipp: Klicke auf einen Händler, um auf der Karte zu zoomen und eine Route zu erhalten.",
                "verified-partners": "Zertifiziert",
                "total-retailers": "Anzahl Händler",
                cities: "Städte",
                featured: "Featured",
                "find-retailers": "Händler finden",
                reset: "Zurücksetzen",
                "trusted-list": "Vertrauensliste",
                results: "Ergebnisse",
                "map-title": "Karte",
                "map-hint": "Klicken Sie auf die Pins",
                "map-footer": "Kartendaten: OpenStreetMap. Funktioniert ohne Key.",
                "no-results": "Keine Händler passen zu Ihrer Suche.",
                "cta-title": "Möchten Sie offizieller Händler werden?",
                "cta-desc": "Kontaktieren Sie uns – wir prüfen Ihren Shop und fügen ihn hier hinzu.",
                "contact-us": "Kontaktieren Sie uns"
            }
        }
    };

    const languageBtn = document.getElementById("language-btn");
    const flagImg = document.getElementById("flag-img");
    const currentLanguage = document.getElementById("current-language");

    // ✅ Load saved language from localStorage
    function loadSavedLanguage() {
        const savedLangCode = localStorage.getItem('tera-language');
        if (savedLangCode) {
            const savedIndex = languageSwitcher.languages.findIndex(lang => lang.code === savedLangCode);
            if (savedIndex > -1) {
                languageSwitcher.currentLang = savedIndex;
                console.log("Loaded saved language:", savedLangCode);
                return true;
            }
        }
        return false;
    }

    function applyTranslations(langCode) {
        const dict = languageSwitcher.translations[langCode] || {};
        document.querySelectorAll("[data-translate]").forEach(el => {
            const key = el.getAttribute("data-translate");
            if (dict[key]) el.textContent = dict[key];
        });

        document.documentElement.lang = langCode;
        document.documentElement.dir = "ltr"; // Force LTR for all languages
        document.body.classList.remove("rtl");
    }

    function setLanguageByIndex(idx) {
        languageSwitcher.currentLang = idx % languageSwitcher.languages.length;
        const lang = languageSwitcher.languages[languageSwitcher.currentLang];
        
        flagImg.src = lang.flag;
        flagImg.alt = lang.name;
        currentLanguage.textContent = lang.name;
        applyTranslations(lang.code);
        
        // ✅ Save selected language to localStorage
        localStorage.setItem('tera-language', lang.code);
        console.log("Saved language to localStorage:", lang.code);
    }

    // ✅ Initialize language - load saved or default to English
    function initializeLanguage() {
        const hasSaved = loadSavedLanguage();
        
        if (!hasSaved) {
            // Default to English if no saved language
            languageSwitcher.currentLang = 0;
            localStorage.setItem('tera-language', 'en');
        }
        
        // Apply the language
        setLanguageByIndex(languageSwitcher.currentLang);
    }

    // Button click to switch language
    languageBtn.addEventListener("click", () => {
        setLanguageByIndex(languageSwitcher.currentLang + 1);
    });

    // ✅ Initialize when page loads
    document.addEventListener('DOMContentLoaded', function() {
        // Small delay to ensure DOM is fully ready
        setTimeout(() => {
            initializeLanguage();
        }, 100);
    });

    // ✅ Also initialize if page is already loaded (for faster pages)
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initializeLanguage);
    } else {
        initializeLanguage();
    }

    /**********************************************************************
     * Smooth scroll for internal anchors
     * (Keep this part - it's after the language switcher)
     **********************************************************************/
    document.querySelectorAll('a[href^="#"]').forEach(a => {
        a.addEventListener("click", (e) => {
            const href = a.getAttribute("href");
            const target = document.querySelector(href);
            if (!target) return;
            e.preventDefault();

            // Close mobile menu if open
            if (navLinks) navLinks.classList.remove("active");
            if (mobileMenuBtn) mobileMenuBtn.innerHTML = '<i class="fas fa-bars"></i>';

            const header = document.querySelector("header");
            const offset = header ? header.getBoundingClientRect().height + 10 : 0;
            const y = target.getBoundingClientRect().top + window.pageYOffset - offset;
            window.scrollTo({ top: y, behavior: "smooth" });
        });
    });

  </script>
</body>
</html>